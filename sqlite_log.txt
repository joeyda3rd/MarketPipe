test-sqlite	Set up job	﻿2025-06-13T22:39:29.8429342Z Current runner version: '2.325.0'
test-sqlite	Set up job	2025-06-13T22:39:29.8455281Z ##[group]Operating System
test-sqlite	Set up job	2025-06-13T22:39:29.8456021Z Ubuntu
test-sqlite	Set up job	2025-06-13T22:39:29.8456584Z 24.04.2
test-sqlite	Set up job	2025-06-13T22:39:29.8457295Z LTS
test-sqlite	Set up job	2025-06-13T22:39:29.8457766Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:29.8458226Z ##[group]Runner Image
test-sqlite	Set up job	2025-06-13T22:39:29.8458911Z Image: ubuntu-24.04
test-sqlite	Set up job	2025-06-13T22:39:29.8459439Z Version: 20250609.1.0
test-sqlite	Set up job	2025-06-13T22:39:29.8460400Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250609.1/images/ubuntu/Ubuntu2404-Readme.md
test-sqlite	Set up job	2025-06-13T22:39:29.8461859Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250609.1
test-sqlite	Set up job	2025-06-13T22:39:29.8462710Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:29.8463199Z ##[group]Runner Image Provisioner
test-sqlite	Set up job	2025-06-13T22:39:29.8463866Z 2.0.437.1
test-sqlite	Set up job	2025-06-13T22:39:29.8464282Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:29.8465389Z ##[group]GITHUB_TOKEN Permissions
test-sqlite	Set up job	2025-06-13T22:39:29.8467976Z Contents: read
test-sqlite	Set up job	2025-06-13T22:39:29.8468508Z Metadata: read
test-sqlite	Set up job	2025-06-13T22:39:29.8469102Z Packages: read
test-sqlite	Set up job	2025-06-13T22:39:29.8469813Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:29.8472356Z Secret source: Actions
test-sqlite	Set up job	2025-06-13T22:39:29.8473058Z Prepare workflow directory
test-sqlite	Set up job	2025-06-13T22:39:29.8791600Z Prepare all required actions
test-sqlite	Set up job	2025-06-13T22:39:29.8829752Z Getting action download info
test-sqlite	Set up job	2025-06-13T22:39:30.1913795Z ##[group]Download immutable action package 'actions/checkout@v4'
test-sqlite	Set up job	2025-06-13T22:39:30.1914774Z Version: 4.2.2
test-sqlite	Set up job	2025-06-13T22:39:30.1915776Z Digest: sha256:ccb2698953eaebd21c7bf6268a94f9c26518a7e38e27e0b83c1fe1ad049819b1
test-sqlite	Set up job	2025-06-13T22:39:30.1917219Z Source commit SHA: 11bd71901bbe5b1630ceea73d27597364c9af683
test-sqlite	Set up job	2025-06-13T22:39:30.1917929Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:30.2758438Z ##[group]Download immutable action package 'actions/setup-python@v5'
test-sqlite	Set up job	2025-06-13T22:39:30.2759285Z Version: 5.6.0
test-sqlite	Set up job	2025-06-13T22:39:30.2759975Z Digest: sha256:0b35a0c11c97499e4e0576589036d450b9f5f9da74b7774225b3614b57324404
test-sqlite	Set up job	2025-06-13T22:39:30.2760972Z Source commit SHA: a26af69be951a213d495a4c3e4e4022e16d87065
test-sqlite	Set up job	2025-06-13T22:39:30.2761700Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:30.4697973Z ##[group]Download immutable action package 'actions/upload-artifact@v4'
test-sqlite	Set up job	2025-06-13T22:39:30.4698782Z Version: 4.6.2
test-sqlite	Set up job	2025-06-13T22:39:30.4699602Z Digest: sha256:290722aa3281d5caf23d0acdc3dbeb3424786a1a01a9cc97e72f147225e37c38
test-sqlite	Set up job	2025-06-13T22:39:30.4700540Z Source commit SHA: ea165f8d65b6e75b540449e92b4886f43607fa02
test-sqlite	Set up job	2025-06-13T22:39:30.4701207Z ##[endgroup]
test-sqlite	Set up job	2025-06-13T22:39:30.6686388Z Complete job name: test-sqlite
test-sqlite	Run actions/checkout@v4	﻿2025-06-13T22:39:30.7359279Z ##[group]Run actions/checkout@v4
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7360145Z with:
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7360558Z   repository: joeyda3rd/MarketPipe
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7361219Z   token: ***
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7361602Z   ssh-strict: true
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7361991Z   ssh-user: git
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7362389Z   persist-credentials: true
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7362828Z   clean: true
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7363238Z   sparse-checkout-cone-mode: true
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7363713Z   fetch-depth: 1
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7364097Z   fetch-tags: false
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7364509Z   show-progress: true
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7364907Z   lfs: false
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7365280Z   submodules: false
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7365702Z   set-safe-directory: true
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.7366357Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9448658Z Syncing repository: joeyda3rd/MarketPipe
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9451248Z ##[group]Getting Git version info
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9452509Z Working directory is '/home/runner/work/MarketPipe/MarketPipe'
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9454342Z [command]/usr/bin/git version
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9489301Z git version 2.49.0
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9516398Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9529592Z Temporarily overriding HOME='/home/runner/work/_temp/772d3037-2a96-46cd-b446-d3329b9463be' before making global git config changes
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9530964Z Adding repository directory to the temporary git global config as a safe directory
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9541616Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/MarketPipe/MarketPipe
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9578117Z Deleting the contents of '/home/runner/work/MarketPipe/MarketPipe'
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9581375Z ##[group]Initializing the repository
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9585534Z [command]/usr/bin/git init /home/runner/work/MarketPipe/MarketPipe
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9677642Z hint: Using 'master' as the name for the initial branch. This default branch name
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9678736Z hint: is subject to change. To configure the initial branch name to use in all
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9679630Z hint: of your new repositories, which will suppress this warning, call:
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9680316Z hint:
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9680923Z hint: 	git config --global init.defaultBranch <name>
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9681485Z hint:
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9682017Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9682885Z hint: 'development'. The just-created branch can be renamed via this command:
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9683924Z hint:
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9684555Z hint: 	git branch -m <name>
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9685335Z Initialized empty Git repository in /home/runner/work/MarketPipe/MarketPipe/.git/
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9695733Z [command]/usr/bin/git remote add origin https://github.com/joeyda3rd/MarketPipe
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9726483Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9727485Z ##[group]Disabling automatic garbage collection
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9731019Z [command]/usr/bin/git config --local gc.auto 0
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9757954Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9758630Z ##[group]Setting up auth
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9764641Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:30.9793777Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.0082647Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.0113804Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.0329562Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.0365433Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.0367000Z ##[group]Fetching the repository
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.0375703Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +b25dfe34b2cbe8b19e0c21d66e08e700d64332e2:refs/remotes/origin/main
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4167911Z From https://github.com/joeyda3rd/MarketPipe
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4169939Z  * [new ref]         b25dfe34b2cbe8b19e0c21d66e08e700d64332e2 -> origin/main
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4198128Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4199170Z ##[group]Determining the checkout info
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4200786Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4207559Z [command]/usr/bin/git sparse-checkout disable
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4246225Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4274336Z ##[group]Checking out the ref
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4278842Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4465082Z Switched to a new branch 'main'
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4467532Z branch 'main' set up to track 'origin/main'.
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4474839Z ##[endgroup]
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4510396Z [command]/usr/bin/git log -1 --format=%H
test-sqlite	Run actions/checkout@v4	2025-06-13T22:39:31.4531685Z b25dfe34b2cbe8b19e0c21d66e08e700d64332e2
test-sqlite	Set up Python	﻿2025-06-13T22:39:31.4839133Z ##[group]Run actions/setup-python@v5
test-sqlite	Set up Python	2025-06-13T22:39:31.4840314Z with:
test-sqlite	Set up Python	2025-06-13T22:39:31.4841112Z   python-version: 3.11
test-sqlite	Set up Python	2025-06-13T22:39:31.4842177Z   check-latest: false
test-sqlite	Set up Python	2025-06-13T22:39:31.4843499Z   token: ***
test-sqlite	Set up Python	2025-06-13T22:39:31.4844356Z   update-environment: true
test-sqlite	Set up Python	2025-06-13T22:39:31.4845374Z   allow-prereleases: false
test-sqlite	Set up Python	2025-06-13T22:39:31.4846376Z   freethreaded: false
test-sqlite	Set up Python	2025-06-13T22:39:31.4847675Z ##[endgroup]
test-sqlite	Set up Python	2025-06-13T22:39:31.6506074Z ##[group]Installed versions
test-sqlite	Set up Python	2025-06-13T22:39:31.6571071Z Successfully set up CPython (3.11.13)
test-sqlite	Set up Python	2025-06-13T22:39:31.6572988Z ##[endgroup]
test-sqlite	Install dependencies	﻿2025-06-13T22:39:31.6715381Z ##[group]Run python -m pip install --upgrade pip
test-sqlite	Install dependencies	2025-06-13T22:39:31.6716975Z [36;1mpython -m pip install --upgrade pip[0m
test-sqlite	Install dependencies	2025-06-13T22:39:31.6718266Z [36;1mpip install -e '.[dev]' pytest-timeout[0m
test-sqlite	Install dependencies	2025-06-13T22:39:31.6821551Z shell: /usr/bin/bash -e {0}
test-sqlite	Install dependencies	2025-06-13T22:39:31.6822502Z env:
test-sqlite	Install dependencies	2025-06-13T22:39:31.6823472Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Install dependencies	2025-06-13T22:39:31.6825229Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.13/x64/lib/pkgconfig
test-sqlite	Install dependencies	2025-06-13T22:39:31.6827298Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Install dependencies	2025-06-13T22:39:31.6828853Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Install dependencies	2025-06-13T22:39:31.6830369Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Install dependencies	2025-06-13T22:39:31.6831918Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.13/x64/lib
test-sqlite	Install dependencies	2025-06-13T22:39:31.6833205Z ##[endgroup]
test-sqlite	Install dependencies	2025-06-13T22:39:34.6376264Z Requirement already satisfied: pip in /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages (25.1.1)
test-sqlite	Install dependencies	2025-06-13T22:39:35.1807283Z Obtaining file:///home/runner/work/MarketPipe/MarketPipe
test-sqlite	Install dependencies	2025-06-13T22:39:35.1824682Z   Installing build dependencies: started
test-sqlite	Install dependencies	2025-06-13T22:39:35.9925374Z   Installing build dependencies: finished with status 'done'
test-sqlite	Install dependencies	2025-06-13T22:39:35.9931281Z   Checking if build backend supports build_editable: started
test-sqlite	Install dependencies	2025-06-13T22:39:36.3982948Z   Checking if build backend supports build_editable: finished with status 'done'
test-sqlite	Install dependencies	2025-06-13T22:39:36.3990503Z   Getting requirements to build editable: started
test-sqlite	Install dependencies	2025-06-13T22:39:36.7062068Z   Getting requirements to build editable: finished with status 'done'
test-sqlite	Install dependencies	2025-06-13T22:39:36.7070381Z   Preparing editable metadata (pyproject.toml): started
test-sqlite	Install dependencies	2025-06-13T22:39:36.8833392Z   Preparing editable metadata (pyproject.toml): finished with status 'done'
test-sqlite	Install dependencies	2025-06-13T22:39:36.9349930Z Collecting pytest-timeout
test-sqlite	Install dependencies	2025-06-13T22:39:36.9667695Z   Downloading pytest_timeout-2.4.0-py3-none-any.whl.metadata (20 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:36.9907517Z Collecting typer[all] (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:36.9948220Z   Downloading typer-0.16.0-py3-none-any.whl.metadata (15 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.1135252Z Collecting pandas (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.1175524Z   Downloading pandas-2.3.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (91 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.2546923Z Collecting duckdb (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.2585336Z   Downloading duckdb-1.3.0-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl.metadata (7.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.3311531Z Collecting pyarrow (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.3346976Z   Downloading pyarrow-20.0.0-cp311-cp311-manylinux_2_28_x86_64.whl.metadata (3.3 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.3623245Z Collecting requests (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.3658021Z   Downloading requests-2.32.4-py3-none-any.whl.metadata (4.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.3993076Z Collecting pyyaml (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4031402Z   Downloading PyYAML-6.0.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4240257Z Collecting httpx (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4274711Z   Downloading httpx-0.28.1-py3-none-any.whl.metadata (7.1 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4437618Z Collecting prometheus_client (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4478093Z   Downloading prometheus_client-0.22.1-py3-none-any.whl.metadata (1.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4653927Z Collecting python-dotenv (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4691811Z   Downloading python_dotenv-1.1.0-py3-none-any.whl.metadata (24 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4894451Z Collecting aiosqlite>=0.19 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.4939303Z   Downloading aiosqlite-0.21.0-py3-none-any.whl.metadata (4.3 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.5257295Z Collecting alembic>=1.13 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.5290216Z   Downloading alembic-1.16.1-py3-none-any.whl.metadata (7.3 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.7911399Z Collecting sqlalchemy>=2.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.7952738Z   Downloading sqlalchemy-2.0.41-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (9.6 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.8160927Z Collecting fasteners>=0.18 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.8195854Z   Downloading fasteners-0.19-py3-none-any.whl.metadata (4.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:37.9315855Z Collecting greenlet>=2.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:37.9358073Z   Downloading greenlet-3.2.3-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl.metadata (4.1 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.0373736Z Collecting pydantic>=2.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.0409950Z   Downloading pydantic-2.11.6-py3-none-any.whl.metadata (67 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.0782004Z Collecting pytest>=7.0.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.0818968Z   Downloading pytest-8.4.0-py3-none-any.whl.metadata (7.7 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.1035879Z Collecting pytest-asyncio>=0.21.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.1073779Z   Downloading pytest_asyncio-1.0.0-py3-none-any.whl.metadata (4.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.1238635Z Collecting pytest-cov>=5.0.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.1274873Z   Downloading pytest_cov-6.2.1-py3-none-any.whl.metadata (30 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.1474749Z Collecting pytest-mock>=3.11.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.1510674Z   Downloading pytest_mock-3.14.1-py3-none-any.whl.metadata (3.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.4412570Z Collecting coverage>=7.5.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.4456908Z   Downloading coverage-7.9.1-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (8.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.4920985Z Collecting black>=23.0.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.4957315Z   Downloading black-25.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl.metadata (81 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.8422646Z Collecting ruff>=0.1.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.8464598Z   Downloading ruff-0.11.13-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (25 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.9342754Z Collecting mypy>=1.5.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.9379670Z   Downloading mypy-1.16.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl.metadata (2.1 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:38.9789957Z Collecting asyncpg>=0.28.0 (from marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:38.9824609Z   Downloading asyncpg-0.30.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (5.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0031118Z Collecting typing_extensions>=4.0 (from aiosqlite>=0.19->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0067581Z   Downloading typing_extensions-4.14.0-py3-none-any.whl.metadata (3.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0385210Z Collecting Mako (from alembic>=1.13->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0424022Z   Downloading mako-1.3.10-py3-none-any.whl.metadata (2.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0651748Z Collecting click>=8.0.0 (from black>=23.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0686516Z   Downloading click-8.2.1-py3-none-any.whl.metadata (2.5 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0794820Z Collecting mypy-extensions>=0.4.3 (from black>=23.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0831393Z   Downloading mypy_extensions-1.1.0-py3-none-any.whl.metadata (1.1 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.0984533Z Collecting packaging>=22.0 (from black>=23.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1022693Z   Downloading packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1153470Z Collecting pathspec>=0.9.0 (from black>=23.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1189191Z   Downloading pathspec-0.12.1-py3-none-any.whl.metadata (21 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1382172Z Collecting platformdirs>=2 (from black>=23.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1418122Z   Downloading platformdirs-4.3.8-py3-none-any.whl.metadata (12 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1639192Z Collecting annotated-types>=0.6.0 (from pydantic>=2.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.1675965Z   Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8035695Z Collecting pydantic-core==2.33.2 (from pydantic>=2.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8072520Z   Downloading pydantic_core-2.33.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.8 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8220441Z Collecting typing-inspection>=0.4.0 (from pydantic>=2.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8253762Z   Downloading typing_inspection-0.4.1-py3-none-any.whl.metadata (2.6 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8411696Z Collecting iniconfig>=1 (from pytest>=7.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8444187Z   Downloading iniconfig-2.1.0-py3-none-any.whl.metadata (2.7 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8601568Z Collecting pluggy<2,>=1.5 (from pytest>=7.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8637085Z   Downloading pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8827255Z Collecting pygments>=2.7.2 (from pytest>=7.0.0->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.8861847Z   Downloading pygments-2.19.1-py3-none-any.whl.metadata (2.5 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.9478281Z Collecting anyio (from httpx->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.9512499Z   Downloading anyio-4.9.0-py3-none-any.whl.metadata (4.7 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.9713681Z Collecting certifi (from httpx->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.9821617Z   Downloading certifi-2025.4.26-py3-none-any.whl.metadata (2.5 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:39.9947581Z Collecting httpcore==1.* (from httpx->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:39.9982241Z   Downloading httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.0125743Z Collecting idna (from httpx->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.0160860Z   Downloading idna-3.10-py3-none-any.whl.metadata (10 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.0290566Z Collecting h11>=0.16 (from httpcore==1.*->httpx->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.0325171Z   Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.0469105Z Collecting sniffio>=1.1 (from anyio->httpx->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.0504985Z   Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.1061923Z Collecting MarkupSafe>=0.9.2 (from Mako->alembic>=1.13->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.1095676Z   Downloading MarkupSafe-3.0.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.2695501Z Collecting numpy>=1.23.2 (from pandas->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.2731678Z   Downloading numpy-2.3.0-cp311-cp311-manylinux_2_28_x86_64.whl.metadata (62 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.2957158Z Collecting python-dateutil>=2.8.2 (from pandas->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.2991044Z   Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.3326541Z Collecting pytz>=2020.1 (from pandas->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.3365863Z   Downloading pytz-2025.2-py2.py3-none-any.whl.metadata (22 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.3535978Z Collecting tzdata>=2022.7 (from pandas->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.3572933Z   Downloading tzdata-2025.2-py2.py3-none-any.whl.metadata (1.4 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.3734552Z Collecting six>=1.5 (from python-dateutil>=2.8.2->pandas->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.3768684Z   Downloading six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.4570362Z Collecting charset_normalizer<4,>=2 (from requests->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.4608844Z   Downloading charset_normalizer-3.4.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (35 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.4920360Z Collecting urllib3<3,>=1.21.1 (from requests->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.4967892Z   Downloading urllib3-2.4.0-py3-none-any.whl.metadata (6.5 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.5096343Z WARNING: typer 0.16.0 does not provide the extra 'all'
test-sqlite	Install dependencies	2025-06-13T22:39:40.5239590Z Collecting shellingham>=1.3.0 (from typer[all]->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.5273910Z   Downloading shellingham-1.5.4-py2.py3-none-any.whl.metadata (3.5 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.5654809Z Collecting rich>=10.11.0 (from typer[all]->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.5691436Z   Downloading rich-14.0.0-py3-none-any.whl.metadata (18 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.5881566Z Collecting markdown-it-py>=2.2.0 (from rich>=10.11.0->typer[all]->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.5917689Z   Downloading markdown_it_py-3.0.0-py3-none-any.whl.metadata (6.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6115569Z Collecting mdurl~=0.1 (from markdown-it-py>=2.2.0->rich>=10.11.0->typer[all]->marketpipe==0.1.0)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6150688Z   Downloading mdurl-0.1.2-py3-none-any.whl.metadata (1.6 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6262139Z Downloading pytest_timeout-2.4.0-py3-none-any.whl (14 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6319349Z Downloading aiosqlite-0.21.0-py3-none-any.whl (15 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6374279Z Downloading alembic-1.16.1-py3-none-any.whl (242 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6486389Z Downloading asyncpg-0.30.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.1 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6698112Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.1/3.1 MB 156.1 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.6743774Z Downloading black-25.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl (1.7 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6885003Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.7/1.7 MB 132.6 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.6920521Z Downloading click-8.2.1-py3-none-any.whl (102 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.6986229Z Downloading coverage-7.9.1-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (244 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.7051844Z Downloading fasteners-0.19-py3-none-any.whl (18 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.7109814Z Downloading greenlet-3.2.3-cp311-cp311-manylinux_2_24_x86_64.manylinux_2_28_x86_64.whl (585 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.7172607Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 585.5/585.5 kB 85.8 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.7214564Z Downloading mypy-1.16.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl (12.5 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.7906622Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.5/12.5 MB 186.3 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.7942232Z Downloading mypy_extensions-1.1.0-py3-none-any.whl (5.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8000561Z Downloading packaging-25.0-py3-none-any.whl (66 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8121884Z Downloading pathspec-0.12.1-py3-none-any.whl (31 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8208452Z Downloading platformdirs-4.3.8-py3-none-any.whl (18 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8270872Z Downloading pydantic-2.11.6-py3-none-any.whl (444 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8361187Z Downloading pydantic_core-2.33.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8498334Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 152.4 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.8533848Z Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8597431Z Downloading pytest-8.4.0-py3-none-any.whl (363 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8679053Z Downloading pluggy-1.6.0-py3-none-any.whl (20 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8734858Z Downloading iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8792871Z Downloading pygments-2.19.1-py3-none-any.whl (1.2 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8879346Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 148.3 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.8920501Z Downloading pytest_asyncio-1.0.0-py3-none-any.whl (15 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.8973231Z Downloading pytest_cov-6.2.1-py3-none-any.whl (24 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.9028365Z Downloading pytest_mock-3.14.1-py3-none-any.whl (9.9 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.9084431Z Downloading ruff-0.11.13-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (11.6 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.9748614Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 11.6/11.6 MB 176.6 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:40.9785249Z Downloading sqlalchemy-2.0.41-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.3 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:40.9984842Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.3/3.3 MB 169.7 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:41.0024002Z Downloading typing_extensions-4.14.0-py3-none-any.whl (43 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.0077394Z Downloading typing_inspection-0.4.1-py3-none-any.whl (14 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.0168367Z Downloading duckdb-1.3.0-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (21.1 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1442684Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 21.1/21.1 MB 166.7 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:41.1479294Z Downloading httpx-0.28.1-py3-none-any.whl (73 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1540919Z Downloading httpcore-1.0.9-py3-none-any.whl (78 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1599557Z Downloading h11-0.16.0-py3-none-any.whl (37 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1653997Z Downloading anyio-4.9.0-py3-none-any.whl (100 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1719476Z Downloading idna-3.10-py3-none-any.whl (70 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1781647Z Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1839884Z Downloading certifi-2025.4.26-py3-none-any.whl (159 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1908787Z Downloading mako-1.3.10-py3-none-any.whl (78 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.1970715Z Downloading MarkupSafe-3.0.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (23 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.2037418Z Downloading pandas-2.3.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.4 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.2647927Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.4/12.4 MB 206.6 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:41.2684061Z Downloading numpy-2.3.0-cp311-cp311-manylinux_2_28_x86_64.whl (16.9 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.3485117Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 16.9/16.9 MB 214.6 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:41.3529516Z Downloading python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.3600027Z Downloading pytz-2025.2-py2.py3-none-any.whl (509 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.3681979Z Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.3737111Z Downloading tzdata-2025.2-py2.py3-none-any.whl (347 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.3813395Z Downloading prometheus_client-0.22.1-py3-none-any.whl (58 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.3875646Z Downloading pyarrow-20.0.0-cp311-cp311-manylinux_2_28_x86_64.whl (42.3 MB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.5893411Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 42.3/42.3 MB 211.2 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:41.5931566Z Downloading python_dotenv-1.1.0-py3-none-any.whl (20 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.5992408Z Downloading PyYAML-6.0.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (762 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6068621Z    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 763.0/763.0 kB 91.5 MB/s eta 0:00:00
test-sqlite	Install dependencies	2025-06-13T22:39:41.6102857Z Downloading requests-2.32.4-py3-none-any.whl (64 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6166324Z Downloading charset_normalizer-3.4.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (147 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6230544Z Downloading urllib3-2.4.0-py3-none-any.whl (128 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6296960Z Downloading typer-0.16.0-py3-none-any.whl (46 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6359138Z Downloading rich-14.0.0-py3-none-any.whl (243 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6421668Z Downloading markdown_it_py-3.0.0-py3-none-any.whl (87 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6484002Z Downloading mdurl-0.1.2-py3-none-any.whl (10.0 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.6542089Z Downloading shellingham-1.5.4-py2.py3-none-any.whl (9.8 kB)
test-sqlite	Install dependencies	2025-06-13T22:39:41.8120117Z Building wheels for collected packages: marketpipe
test-sqlite	Install dependencies	2025-06-13T22:39:41.8128395Z   Building editable for marketpipe (pyproject.toml): started
test-sqlite	Install dependencies	2025-06-13T22:39:42.0208523Z   Building editable for marketpipe (pyproject.toml): finished with status 'done'
test-sqlite	Install dependencies	2025-06-13T22:39:42.0214435Z   Created wheel for marketpipe: filename=marketpipe-0.1.0-0.editable-py3-none-any.whl size=8220 sha256=5a7709884988480bd189bdb5052d3e6167359a9cee476a474688e5f7e4a35611
test-sqlite	Install dependencies	2025-06-13T22:39:42.0216504Z   Stored in directory: /tmp/pip-ephem-wheel-cache-w7dbawf8/wheels/96/be/05/33a3b3c6a239a01f9d28923bface967be519c3523749cce054
test-sqlite	Install dependencies	2025-06-13T22:39:42.0236491Z Successfully built marketpipe
test-sqlite	Install dependencies	2025-06-13T22:39:42.1435203Z Installing collected packages: pytz, urllib3, tzdata, typing_extensions, sniffio, six, shellingham, ruff, pyyaml, python-dotenv, pygments, pyarrow, prometheus_client, pluggy, platformdirs, pathspec, packaging, numpy, mypy-extensions, mdurl, MarkupSafe, iniconfig, idna, h11, greenlet, fasteners, duckdb, coverage, click, charset_normalizer, certifi, asyncpg, annotated-types, typing-inspection, sqlalchemy, requests, python-dateutil, pytest, pydantic-core, mypy, markdown-it-py, Mako, httpcore, black, anyio, aiosqlite, rich, pytest-timeout, pytest-mock, pytest-cov, pytest-asyncio, pydantic, pandas, httpx, alembic, typer, marketpipe
test-sqlite	Install dependencies	2025-06-13T22:39:54.4084901Z 
test-sqlite	Install dependencies	2025-06-13T22:39:54.4116603Z Successfully installed Mako-1.3.10 MarkupSafe-3.0.2 aiosqlite-0.21.0 alembic-1.16.1 annotated-types-0.7.0 anyio-4.9.0 asyncpg-0.30.0 black-25.1.0 certifi-2025.4.26 charset_normalizer-3.4.2 click-8.2.1 coverage-7.9.1 duckdb-1.3.0 fasteners-0.19 greenlet-3.2.3 h11-0.16.0 httpcore-1.0.9 httpx-0.28.1 idna-3.10 iniconfig-2.1.0 markdown-it-py-3.0.0 marketpipe-0.1.0 mdurl-0.1.2 mypy-1.16.0 mypy-extensions-1.1.0 numpy-2.3.0 packaging-25.0 pandas-2.3.0 pathspec-0.12.1 platformdirs-4.3.8 pluggy-1.6.0 prometheus_client-0.22.1 pyarrow-20.0.0 pydantic-2.11.6 pydantic-core-2.33.2 pygments-2.19.1 pytest-8.4.0 pytest-asyncio-1.0.0 pytest-cov-6.2.1 pytest-mock-3.14.1 pytest-timeout-2.4.0 python-dateutil-2.9.0.post0 python-dotenv-1.1.0 pytz-2025.2 pyyaml-6.0.2 requests-2.32.4 rich-14.0.0 ruff-0.11.13 shellingham-1.5.4 six-1.17.0 sniffio-1.3.1 sqlalchemy-2.0.41 typer-0.16.0 typing-inspection-0.4.1 typing_extensions-4.14.0 tzdata-2025.2 urllib3-2.4.0
test-sqlite	Run tests (SQLite)	﻿2025-06-13T22:39:54.9509305Z ##[group]Run mkdir -p tmp/coverage
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9509630Z [36;1mmkdir -p tmp/coverage[0m
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9510014Z [36;1mpytest -q --cov=marketpipe --cov-branch -m "not integration" --timeout=60[0m
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9567949Z shell: /usr/bin/bash -e {0}
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9568163Z env:
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9568397Z   pythonLocation: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9568813Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.11.13/x64/lib/pkgconfig
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9569180Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9569512Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9569838Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.11.13/x64
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9570178Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.11.13/x64/lib
test-sqlite	Run tests (SQLite)	2025-06-13T22:39:54.9570469Z ##[endgroup]
test-sqlite	Run tests (SQLite)	2025-06-13T22:40:54.2744044Z ....................F................F.................................. [ 14%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:40:55.0299632Z ...........F....................................ss....ssss.............. [ 28%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:25.7607100Z ........................................................................ [ 43%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:29.3403943Z ........................................................................ [ 57%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:29.4581361Z ........................................................................ [ 71%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:30.2291253Z ........................................................................ [ 86%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5028001Z ......................................................................   [100%]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5028675Z =================================== FAILURES ===================================
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5029346Z _____________________ test_command_consistency_both_paths ______________________
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5029800Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5029990Z     def test_command_consistency_both_paths():
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5030602Z         """Test that both command paths have consistent help output."""
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5031202Z         # Test hyphenated command help
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5031633Z         result1 = subprocess.run(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5032169Z             [sys.executable, "-m", "marketpipe", "ingest-ohlcv", "--help"],
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5032734Z             capture_output=True,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5033113Z             text=True
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5033424Z         )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5033726Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5033999Z         # Test subcommand help
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5034370Z         result2 = subprocess.run(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5034883Z             [sys.executable, "-m", "marketpipe", "ohlcv", "ingest", "--help"],
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5035434Z             capture_output=True,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5035777Z             text=True
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5036096Z         )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5036338Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5036617Z         # Both should succeed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5037422Z         assert result1.returncode == 0, f"ingest-ohlcv --help failed: {result1.stderr}"
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5038306Z         assert result2.returncode == 0, f"ohlcv ingest --help failed: {result2.stderr}"
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5038894Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5039196Z         # Both should mention ingest functionality
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5039684Z         assert "ingest" in result1.stdout.lower()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5040142Z         assert "ingest" in result2.stdout.lower()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5040565Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5040882Z         # Both should have similar options available
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5041450Z         for option in ["--config", "--symbols", "--start", "--end"]:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5042221Z >           assert option in result1.stdout, f"Option {option} missing from ingest-ohlcv help"
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5043062Z E           AssertionError: Option --config missing from ingest-ohlcv help
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5045126Z E           assert '--config' in '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n'
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5048720Z E            +  where '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n' = CompletedProcess(args=['/opt/hostedtoolcache/Python/3.11.13/x64/bin/python', '-m', 'marketpipe', 'ingest-ohlcv', '--he...x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n', stderr='').stdout
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5050282Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5050545Z tests/cli/test_new_command_paths.py:195: AssertionError
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5051441Z _ TestIngestionCoordinatorEndToEndFlow.test_coordinator_handles_multiple_symbols_correctly _
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5052078Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5052648Z self = <marketpipe.ingestion.application.services.IngestionCoordinatorService object at 0x7f63646ce9d0>
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5053693Z job_id = IngestionJobId(value=UUID('f63584c3-9cd9-4d73-b0f7-adb089c286d3'))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5054140Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5054429Z     async def execute_job(self, job_id: IngestionJobId) -> Dict[str, Any]:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5054960Z         """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5055242Z         Execute an ingestion job end-to-end.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5055887Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5056162Z         This coordinates the entire process:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5056527Z         1. Start the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5057046Z         2. Process symbols in parallel
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5057434Z         3. Handle checkpointing and recovery
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5057793Z         4. Collect metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5058100Z         5. Complete or fail the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5058410Z         """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5058641Z         # Get the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5058980Z         job = await self._job_repository.get_by_id(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5059390Z         if not job:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5059684Z             raise IngestionJobNotFoundError(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5060058Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5060280Z         # Start the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5060654Z         await self._job_service.start_job(StartJobCommand(job_id))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5061075Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5061324Z         # Reload the job to get the updated state
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5061760Z         job = await self._job_repository.get_by_id(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5062147Z         if not job:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5062437Z             raise IngestionJobNotFoundError(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5062786Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5063049Z         start_time = datetime.now(timezone.utc)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5063442Z         processed_symbols = 0
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5063758Z         failed_symbols = 0
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5064040Z         total_bars = 0
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5064359Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5064603Z         try:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5064903Z             # Process symbols in parallel using asyncio.gather
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5065453Z             tasks = [self._process_symbol(job, symbol) for symbol in job.symbols]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5065906Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5066144Z             # Execute all tasks concurrently
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5066617Z             results = await asyncio.gather(*tasks, return_exceptions=True)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5067251Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5067489Z             # Process results
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5067817Z             for i, result in enumerate(results):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5068206Z                 symbol = job.symbols[i]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5068529Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5068777Z                 if isinstance(result, Exception):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5069200Z                     # Log error and continue with other symbols
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5069593Z                     failed_symbols += 1
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5070032Z                     print(f"Failed to process symbol {symbol}: {result}")
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5070493Z                     # Record symbol-level failure metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5071141Z                     from marketpipe.metrics import record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5071512Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5071777Z                     record_metric("ingest_symbol_failures", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5072225Z                     record_metric(f"ingest_failures_{symbol.value}", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5072618Z                 else:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5072879Z                     try:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5073176Z                         bars_count, partition = result
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5073522Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5073777Z                         # Mark symbol as processed in the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5074206Z                         job = await self._job_repository.get_by_id(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5074609Z                             job_id
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5074953Z                         )  # Refresh job state
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5075392Z                         job.mark_symbol_processed(symbol, bars_count, partition)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5075891Z                         await self._job_repository.save(job)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5076256Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5076485Z                         # Update metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5077017Z                         processed_symbols += 1
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5077403Z                         total_bars += bars_count
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5077741Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5078192Z                         # Record success metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5078627Z                         from marketpipe.metrics import record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5079031Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5079296Z >                       record_metric("ingest_symbols_success", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5079611Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5079826Z src/marketpipe/ingestion/application/services.py:359: 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5080309Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5080774Z src/marketpipe/metrics.py:248: in record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5081181Z     repo = get_metrics_repository()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5081519Z            ^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5081939Z src/marketpipe/metrics.py:206: in get_metrics_repository
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5082408Z     _metrics_repo = SqliteMetricsRepository()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5082783Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5083155Z src/marketpipe/metrics.py:87: in __init__
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5083551Z     apply_pending(self._db_path)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5083967Z src/marketpipe/migrations/__init__.py:39: in apply_pending
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5084443Z     _ensure_schema_version_table(db_path)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5084843Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5085143Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5085278Z db_path = PosixPath('data/db/core.db')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5085537Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5085740Z     def _ensure_schema_version_table(db_path: Path) -> None:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5086233Z         """Create schema_version table if it doesn't exist."""
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5086843Z         with sqlite3.connect(db_path) as conn:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5087204Z >           conn.execute(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5087475Z                 """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5087780Z                 CREATE TABLE IF NOT EXISTS schema_version (
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5088189Z                     version TEXT PRIMARY KEY,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5088566Z                     applied_ts INTEGER NOT NULL
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5088914Z                 )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5089148Z             """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5089400Z             )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5089692Z E           sqlite3.OperationalError: database is locked
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5089987Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5090187Z src/marketpipe/migrations/__init__.py:74: OperationalError
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5090522Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5090759Z During handling of the above exception, another exception occurred:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5091132Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5091609Z self = <marketpipe.ingestion.application.services.IngestionCoordinatorService object at 0x7f63646ce9d0>
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5092767Z job_id = IngestionJobId(value=UUID('f63584c3-9cd9-4d73-b0f7-adb089c286d3'))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5093164Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5093415Z     async def execute_job(self, job_id: IngestionJobId) -> Dict[str, Any]:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5093881Z         """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5094145Z         Execute an ingestion job end-to-end.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5094490Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5094737Z         This coordinates the entire process:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5095103Z         1. Start the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5095409Z         2. Process symbols in parallel
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5095767Z         3. Handle checkpointing and recovery
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5096112Z         4. Collect metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5096403Z         5. Complete or fail the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5096840Z         """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5097069Z         # Get the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5097396Z         job = await self._job_repository.get_by_id(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5097834Z         if not job:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5098134Z             raise IngestionJobNotFoundError(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5098489Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5098718Z         # Start the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5099104Z         await self._job_service.start_job(StartJobCommand(job_id))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5099539Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5099805Z         # Reload the job to get the updated state
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5100424Z         job = await self._job_repository.get_by_id(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5100807Z         if not job:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5101094Z             raise IngestionJobNotFoundError(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5101465Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5101726Z         start_time = datetime.now(timezone.utc)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5102095Z         processed_symbols = 0
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5102413Z         failed_symbols = 0
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5102697Z         total_bars = 0
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5102955Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5103159Z         try:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5103473Z             # Process symbols in parallel using asyncio.gather
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5104128Z             tasks = [self._process_symbol(job, symbol) for symbol in job.symbols]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5104587Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5104829Z             # Execute all tasks concurrently
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5105278Z             results = await asyncio.gather(*tasks, return_exceptions=True)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5105719Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5105931Z             # Process results
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5106261Z             for i, result in enumerate(results):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5106624Z                 symbol = job.symbols[i]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5107075Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5107311Z                 if isinstance(result, Exception):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5107708Z                     # Log error and continue with other symbols
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5108084Z                     failed_symbols += 1
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5108496Z                     print(f"Failed to process symbol {symbol}: {result}")
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5108948Z                     # Record symbol-level failure metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5109364Z                     from marketpipe.metrics import record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5109734Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5109984Z                     record_metric("ingest_symbol_failures", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5110428Z                     record_metric(f"ingest_failures_{symbol.value}", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5110829Z                 else:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5111077Z                     try:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5111379Z                         bars_count, partition = result
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5111717Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5111982Z                         # Mark symbol as processed in the job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5112397Z                         job = await self._job_repository.get_by_id(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5112794Z                             job_id
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5113125Z                         )  # Refresh job state
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5113577Z                         job.mark_symbol_processed(symbol, bars_count, partition)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5114274Z                         await self._job_repository.save(job)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5114631Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5114853Z                         # Update metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5115203Z                         processed_symbols += 1
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5115558Z                         total_bars += bars_count
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5115881Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5116126Z                         # Record success metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5116529Z                         from marketpipe.metrics import record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5117086Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5117351Z                         record_metric("ingest_symbols_success", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5117795Z                         record_metric("ingest_rows_processed", bars_count)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5118275Z                         record_metric(f"ingest_success_{symbol.value}", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5118664Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5118885Z                         # Publish events
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5119261Z                         for event in job.domain_events:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5119675Z                             await self._event_publisher.publish(event)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5120050Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5120297Z                         # Clear events after publishing
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5120683Z                         job.clear_domain_events()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5121209Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5121441Z                     except Exception as e:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5121776Z                         # Log error
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5122093Z                         failed_symbols += 1
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5122524Z                         print(f"Failed to process result for symbol {symbol}: {e}")
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5122993Z                         # Record metrics
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5123394Z                         from marketpipe.metrics import record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5123778Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5124039Z >                       record_metric("ingest_symbol_failures", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5124338Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5124547Z src/marketpipe/ingestion/application/services.py:377: 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5125022Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5125475Z src/marketpipe/metrics.py:248: in record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5125871Z     repo = get_metrics_repository()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5126194Z            ^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5126597Z src/marketpipe/metrics.py:206: in get_metrics_repository
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5127248Z     _metrics_repo = SqliteMetricsRepository()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5127628Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5127987Z src/marketpipe/metrics.py:87: in __init__
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5128382Z     apply_pending(self._db_path)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5128801Z src/marketpipe/migrations/__init__.py:39: in apply_pending
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5129271Z     _ensure_schema_version_table(db_path)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5129678Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5129997Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5130134Z db_path = PosixPath('data/db/core.db')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5130387Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5130583Z     def _ensure_schema_version_table(db_path: Path) -> None:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5131066Z         """Create schema_version table if it doesn't exist."""
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5131517Z         with sqlite3.connect(db_path) as conn:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5131879Z >           conn.execute(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5132163Z                 """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5132465Z                 CREATE TABLE IF NOT EXISTS schema_version (
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5132878Z                     version TEXT PRIMARY KEY,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5133252Z                     applied_ts INTEGER NOT NULL
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5133580Z                 )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5133818Z             """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5134036Z             )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5134336Z E           sqlite3.OperationalError: database is locked
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5134806Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5135014Z src/marketpipe/migrations/__init__.py:74: OperationalError
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5135344Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5135581Z During handling of the above exception, another exception occurred:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5135950Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5136429Z self = <test_ingestion_coordinator_service_flow.TestIngestionCoordinatorEndToEndFlow object at 0x7f6364bde590>
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5138384Z ingestion_services = {'checkpoint_repository': <tests.fakes.repositories.FakeIngestionCheckpointRepository object at 0x7f6364a20150>, 'coor...er object at 0x7f63646ce2d0>, 'event_publisher': <tests.fakes.events.FakeEventPublisher object at 0x7f63646cfdd0>, ...}
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5140046Z tmp_path = PosixPath('/tmp/pytest-of-runner/pytest-0/test_coordinator_handles_multi0')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5140516Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5140635Z     @pytest.mark.asyncio
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5141030Z     async def test_coordinator_handles_multiple_symbols_correctly(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5141521Z         self, ingestion_services, tmp_path
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5141860Z     ):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5142205Z         """Test that coordinator handles multiple symbols correctly."""
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5142681Z         services = ingestion_services
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5143020Z         job_service = services["job_service"]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5143411Z         job_repository = services["job_repository"]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5144040Z         market_data_adapter = services["market_data_adapter"]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5144497Z         event_publisher = services["event_publisher"]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5144867Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5145122Z         # Setup test data for multiple symbols
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5145503Z         symbols = [Symbol("AAPL"), Symbol("GOOGL")]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5145881Z         for symbol in symbols:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5146238Z             test_bars = create_test_ohlcv_bars(symbol, count=5)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5146867Z             market_data_adapter.set_bars_data(symbol, test_bars)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5147270Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5147532Z         # Create ingestion job with multiple symbols
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5147937Z         time_range = create_recent_time_range()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5148271Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5148529Z         command = CreateIngestionJobCommand(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5148905Z             symbols=symbols,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5149211Z             time_range=time_range,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5149637Z             configuration=create_test_configuration(tmp_path / "data"),
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5150144Z             batch_config=create_test_batch_configuration(),
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5150506Z         )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5150712Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5150975Z         job_id = await job_service.create_job(command)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5151324Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5151579Z         # Execute the job through the coordinator
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5152009Z         coordinator_service = services["coordinator_service"]
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5152495Z >       result = await coordinator_service.execute_job(job_id)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5152913Z                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5153150Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5153386Z tests/integration/test_ingestion_coordinator_service_flow.py:217: 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5153888Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5154456Z src/marketpipe/ingestion/application/services.py:414: in execute_job
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5154993Z     record_metric("ingest_job_failures", 1)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5155390Z src/marketpipe/metrics.py:248: in record_metric
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5155779Z     repo = get_metrics_repository()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5156093Z            ^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5156493Z src/marketpipe/metrics.py:206: in get_metrics_repository
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5157198Z     _metrics_repo = SqliteMetricsRepository()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5157469Z                     ^^^^^^^^^^^^^^^^^^^^^^^^^
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5157712Z src/marketpipe/metrics.py:87: in __init__
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5158116Z     apply_pending(self._db_path)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5158406Z src/marketpipe/migrations/__init__.py:39: in apply_pending
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5158708Z     _ensure_schema_version_table(db_path)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5158974Z _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5159168Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5159258Z db_path = PosixPath('data/db/core.db')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5159431Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5159561Z     def _ensure_schema_version_table(db_path: Path) -> None:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5159894Z         """Create schema_version table if it doesn't exist."""
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5160183Z         with sqlite3.connect(db_path) as conn:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5160426Z >           conn.execute(
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5160605Z                 """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5160808Z                 CREATE TABLE IF NOT EXISTS schema_version (
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5161071Z                     version TEXT PRIMARY KEY,
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5161320Z                     applied_ts INTEGER NOT NULL
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5161545Z                 )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5161699Z             """
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5161854Z             )
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5162057Z E           sqlite3.OperationalError: database is locked
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5162258Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5162400Z src/marketpipe/migrations/__init__.py:74: OperationalError
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5162887Z ----------------------------- Captured stdout call -----------------------------
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5163271Z Failed to process result for symbol AAPL: database is locked
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5163657Z _______________ TestCLIRename.test_command_signatures_preserved ________________
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5163916Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5164070Z self = <tests.test_cli_rename.TestCLIRename object at 0x7f6368a2a5d0>
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5164311Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5164420Z     def test_command_signatures_preserved(self):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5164734Z         """Test that command signatures are preserved from old CLI."""
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5165117Z         # Test that the new commands accept the same parameters as the old ones
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5165413Z     
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5165575Z         # Ingest command parameters
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5165856Z         result = runner.invoke(app, ["ingest-ohlcv", "--help"])
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5166168Z >       assert "--config" in result.stdout
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5167244Z E       AssertionError: assert '--config' in '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n'
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5168221Z E        +  where '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n' = <Result okay>.stdout
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5168639Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5168743Z tests/test_cli_rename.py:158: AssertionError
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5169030Z =============================== warnings summary ===============================
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5169347Z src/marketpipe/validation/application/services.py:6
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5170383Z   /home/runner/work/MarketPipe/MarketPipe/src/marketpipe/validation/application/services.py:6: DeprecationWarning: marketpipe.events is deprecated. Import domain events from marketpipe.domain.events and get event bus from bootstrap.get_event_bus()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5171405Z     from marketpipe.events import IngestionJobCompleted
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5171609Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5171705Z tests/integration/test_full_pipeline.py:73
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5172764Z   /home/runner/work/MarketPipe/MarketPipe/tests/integration/test_full_pipeline.py:73: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5173920Z     @pytest.mark.integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5174059Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5174158Z tests/integration/test_full_pipeline.py:205
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5175934Z   /home/runner/work/MarketPipe/MarketPipe/tests/integration/test_full_pipeline.py:205: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5177125Z     @pytest.mark.integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5177275Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5177373Z tests/integration/test_full_pipeline.py:333
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5178401Z   /home/runner/work/MarketPipe/MarketPipe/tests/integration/test_full_pipeline.py:333: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5179408Z     @pytest.mark.integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5179552Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5179645Z tests/integration/test_pipeline_e2e.py:34
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5180646Z   /home/runner/work/MarketPipe/MarketPipe/tests/integration/test_pipeline_e2e.py:34: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5181798Z     @pytest.mark.integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5181934Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5182029Z tests/integration/test_pipeline_e2e.py:165
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5183034Z   /home/runner/work/MarketPipe/MarketPipe/tests/integration/test_pipeline_e2e.py:165: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5184033Z     @pytest.mark.integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5184165Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5184267Z tests/integration/test_pipeline_e2e.py:220
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5185278Z   /home/runner/work/MarketPipe/MarketPipe/tests/integration/test_pipeline_e2e.py:220: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5186281Z     @pytest.mark.integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5186414Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5186500Z tests/test_migrations.py:19
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5187521Z   /home/runner/work/MarketPipe/MarketPipe/tests/test_migrations.py:19: PytestUnknownMarkWarning: Unknown pytest.mark.sqlite_only - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5188477Z     pytestmark = pytest.mark.sqlite_only
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5188643Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5188729Z tests/test_postgres_migrations.py:11
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5189698Z   /home/runner/work/MarketPipe/MarketPipe/tests/test_postgres_migrations.py:11: PytestUnknownMarkWarning: Unknown pytest.mark.postgres - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5190684Z     pytestmark = pytest.mark.postgres
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5190847Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5191397Z tests/integration/test_ingestion_coordinator_service_flow.py::TestIngestionCoordinatorEndToEndFlow::test_coordinator_handles_multiple_symbols_correctly
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5192461Z   /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-1
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5193127Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5193285Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5199282Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 107, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5199955Z       future.get_loop().call_soon_threadsafe(set_result, future, result)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5200824Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5201342Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5201828Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5222138Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5230103Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5230369Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5230633Z   During handling of the above exception, another exception occurred:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5230959Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5231121Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5231663Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/threading.py", line 1045, in _bootstrap_inner
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5232114Z       self.run()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5232567Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 110, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5233136Z       future.get_loop().call_soon_threadsafe(set_exception, future, e)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5233749Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5234255Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5234906Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5235784Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5236579Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5236972Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5237225Z   Enable tracemalloc to get traceback where the object was allocated.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5237764Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5238309Z     warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5238574Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5239085Z tests/integration/test_ingestion_coordinator_service_flow.py::TestIngestionCoordinatorEndToEndFlow::test_coordinator_uses_checkpoints_for_resumable_operations
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5240164Z   /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-2
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5240829Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5240993Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5241505Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 107, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5242060Z       future.get_loop().call_soon_threadsafe(set_result, future, result)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5242651Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5243133Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5243590Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5244301Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5244986Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5245214Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5245465Z   During handling of the above exception, another exception occurred:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5245779Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5245937Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5246423Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/threading.py", line 1045, in _bootstrap_inner
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5247096Z       self.run()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5247563Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 110, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5248116Z       future.get_loop().call_soon_threadsafe(set_exception, future, e)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5248708Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5249373Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5249836Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5250565Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5251286Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5251514Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5251773Z   Enable tracemalloc to get traceback where the object was allocated.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5252294Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5252839Z     warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5253099Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5253573Z tests/integration/test_ingestion_coordinator_service_flow.py::TestIngestionCoordinatorEndToEndFlow::test_coordinator_creates_proper_partition_paths
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5254627Z   /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-3
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5255288Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5255453Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5255937Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 107, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5256615Z       future.get_loop().call_soon_threadsafe(set_result, future, result)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5257345Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5257834Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5258290Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5258986Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5259675Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5259906Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5260146Z   During handling of the above exception, another exception occurred:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5260450Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5260607Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5261073Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/threading.py", line 1045, in _bootstrap_inner
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5261507Z       self.run()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5261934Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 110, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5262472Z       future.get_loop().call_soon_threadsafe(set_exception, future, e)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5263048Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5263533Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5263977Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5264639Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5265328Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5265556Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5265798Z   Enable tracemalloc to get traceback where the object was allocated.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5266320Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5266982Z     warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5267246Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5267715Z tests/integration/test_ingestion_coordinator_service_flow.py::TestIngestionCoordinatorEndToEndFlow::test_coordinator_emits_comprehensive_domain_events
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5268772Z   /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/_pytest/threadexception.py:58: PytestUnhandledThreadExceptionWarning: Exception in thread Thread-4
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5269425Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5269592Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5270233Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 107, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5270782Z       future.get_loop().call_soon_threadsafe(set_result, future, result)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5271376Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5271859Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5272316Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5273021Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5273679Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5273900Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5274141Z   During handling of the above exception, another exception occurred:
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5274446Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5274603Z   Traceback (most recent call last):
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5275068Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/threading.py", line 1045, in _bootstrap_inner
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5275510Z       self.run()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5275929Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/aiosqlite/core.py", line 110, in run
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5276466Z       future.get_loop().call_soon_threadsafe(set_exception, future, e)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5277170Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 807, in call_soon_threadsafe
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5277789Z       self._check_closed()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5278241Z     File "/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/asyncio/base_events.py", line 520, in _check_closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5278904Z ##[error]      raise RuntimeError('Event loop is closed')
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5279582Z   RuntimeError: Event loop is closed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5279804Z   
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5280048Z   Enable tracemalloc to get traceback where the object was allocated.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5280571Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5281107Z     warnings.warn(pytest.PytestUnhandledThreadExceptionWarning(msg))
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5281364Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5281564Z tests/test_provider_registry.py::TestProviderRegistry::test_clear_registry
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5281971Z tests/unit/cli/test_ingest_cli.py::test_ingest_cli_smoke
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5282804Z   /home/runner/work/MarketPipe/MarketPipe/src/marketpipe/ingestion/infrastructure/provider_registry.py:39: DeprecationWarning: SelectableGroups dict interface is deprecated. Use select.
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5283651Z     marketpipe_providers = eps.get("marketpipe.providers", [])
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5283882Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5284178Z tests/test_secrets_masking_integration.py::TestSecretsInLogs::test_alpaca_client_json_parse_error_masks_key
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5285056Z   /home/runner/work/MarketPipe/MarketPipe/tests/test_secrets_masking_integration.py:115: UserWarning: Log capture failed due to test isolation - main security check passed
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5285868Z     warnings.warn("Log capture failed due to test isolation - main security check passed")
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5286166Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5286443Z tests/unit/domain/test_symbol_bars_aggregate.py::TestSymbolBarsAggregate::test_event_bus_integration
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5287692Z   /opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/importlib/__init__.py:126: DeprecationWarning: marketpipe.events is deprecated. Import domain events from marketpipe.domain.events and get event bus from bootstrap.get_event_bus()
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5288626Z     return _bootstrap._gcd_import(name[level:], package, level)
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5288851Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5289036Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5289402Z ================================ tests coverage ================================
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5289765Z _______________ coverage: platform linux, python 3.11.13-final-0 _______________
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5290166Z 
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5290292Z Name                                                                Stmts   Miss Branch BrPart  Cover
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5290657Z -----------------------------------------------------------------------------------------------------
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5291069Z src/marketpipe/__init__.py                                              2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5291479Z src/marketpipe/__main__.py                                              3      0      2      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5291925Z src/marketpipe/aggregation/__init__.py                                  3      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5292447Z src/marketpipe/aggregation/application/__init__.py                      2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5293019Z src/marketpipe/aggregation/application/services.py                     56      1      2      1    97%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5293578Z src/marketpipe/aggregation/domain/__init__.py                           3      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5294107Z src/marketpipe/aggregation/domain/events.py                            53     12      0      0    77%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5294652Z src/marketpipe/aggregation/domain/services.py                           7      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5295214Z src/marketpipe/aggregation/domain/value_objects.py                      9      1      0      0    89%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5295914Z src/marketpipe/aggregation/infrastructure/__init__.py                   3      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5296513Z src/marketpipe/aggregation/infrastructure/duckdb_engine.py             68     10     20      5    83%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5297236Z src/marketpipe/aggregation/infrastructure/duckdb_views.py              76      0      8      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5297797Z src/marketpipe/bootstrap.py                                            71      2      8      2    95%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5298232Z src/marketpipe/cli/__init__.py                                         39     10      4      2    72%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5298652Z src/marketpipe/cli/__main__.py                                          3      0      2      1    80%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5299107Z src/marketpipe/cli/ohlcv_aggregate.py                                  38      9      0      0    76%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5299581Z src/marketpipe/cli/ohlcv_ingest.py                                    124     42     20      6    65%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5300053Z src/marketpipe/cli/ohlcv_validate.py                                  109     82     30      2    21%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5300502Z src/marketpipe/cli/query.py                                            27      0      8      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5300934Z src/marketpipe/cli/utils.py                                           167    128     60      5    20%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5301352Z src/marketpipe/cli_old.py                                              16     16      6      0     0%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5301782Z src/marketpipe/config/__init__.py                                       2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5302246Z src/marketpipe/config/ingestion.py                                     92      5     28      3    93%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5302702Z src/marketpipe/domain/__init__.py                                       7      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5303173Z src/marketpipe/domain/aggregates.py                                   198     40     50      8    77%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5303652Z src/marketpipe/domain/entities.py                                     101     17      6      0    80%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5304135Z src/marketpipe/domain/event_handlers.py                                 2      2      0      0     0%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5304612Z src/marketpipe/domain/events.py                                       270     62     40     10    70%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5305072Z src/marketpipe/domain/market_data.py                                   29      4      0      0    86%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5305687Z src/marketpipe/domain/repositories.py                                 113     30      2      1    73%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5306388Z src/marketpipe/domain/services.py                                     261     69    120     14    71%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5325824Z src/marketpipe/domain/value_objects.py                                179     50     24      5    67%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5326337Z src/marketpipe/events.py                                                6      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5327035Z src/marketpipe/infrastructure/__init__.py                               3      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5327585Z src/marketpipe/infrastructure/events/__init__.py                        2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5328161Z src/marketpipe/infrastructure/events/publishers.py                     30     17     10      0    32%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5328743Z src/marketpipe/infrastructure/messaging/__init__.py                     3      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5329348Z src/marketpipe/infrastructure/messaging/in_memory_bus.py               25      0      4      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5329933Z src/marketpipe/infrastructure/monitoring/__init__.py                    3      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5330533Z src/marketpipe/infrastructure/monitoring/domain_event_handlers.py      45      8      2      0    83%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5331331Z src/marketpipe/infrastructure/monitoring/event_handlers.py             97     17     14      7    78%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5331932Z src/marketpipe/infrastructure/repositories/__init__.py                  1      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5332534Z src/marketpipe/infrastructure/repositories/sqlite_domain.py           211     44     28      2    79%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5333124Z src/marketpipe/infrastructure/sqlite_async_mixin.py                    27      2      2      0    93%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5333682Z src/marketpipe/infrastructure/sqlite_pool.py                           55      2      8      0    97%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5334219Z src/marketpipe/infrastructure/storage/__init__.py                       2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5334806Z src/marketpipe/infrastructure/storage/parquet_engine.py               194     39     68      9    79%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5335354Z src/marketpipe/ingestion/__init__.py                                    5      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5335864Z src/marketpipe/ingestion/application/__init__.py                        5      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5336421Z src/marketpipe/ingestion/application/commands.py                       39      2      4      2    91%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5337104Z src/marketpipe/ingestion/application/queries.py                        32      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5337676Z src/marketpipe/ingestion/application/services.py                      196     47     60      8    70%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5338232Z src/marketpipe/ingestion/connectors/__init__.py                         7      7      0      0     0%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5338785Z src/marketpipe/ingestion/connectors/alpaca_client.py                   77     77     20      0     0%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5339333Z src/marketpipe/ingestion/domain/__init__.py                             8      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5339859Z src/marketpipe/ingestion/domain/entities.py                           185     16     28      6    89%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5340388Z src/marketpipe/ingestion/domain/events.py                             164     24     28     10    78%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5340935Z src/marketpipe/ingestion/domain/repositories.py                        77     19      0      0    75%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5341476Z src/marketpipe/ingestion/domain/services.py                           116     46     52     12    55%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5342010Z src/marketpipe/ingestion/domain/storage.py                              9      1      0      0    89%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5342671Z src/marketpipe/ingestion/domain/value_objects.py                      127     46     48     14    54%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5343228Z src/marketpipe/ingestion/infrastructure/__init__.py                    10      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5343806Z src/marketpipe/ingestion/infrastructure/adapters.py                   135     27     12      2    78%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5344401Z src/marketpipe/ingestion/infrastructure/alpaca_client.py              153     47     46      7    67%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5344985Z src/marketpipe/ingestion/infrastructure/auth.py                        20      3      0      0    85%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5345556Z src/marketpipe/ingestion/infrastructure/base_api_client.py             63      5     10      0    90%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5346144Z src/marketpipe/ingestion/infrastructure/clients.py                     27     14      0      0    48%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5346841Z src/marketpipe/ingestion/infrastructure/fake_adapter.py                60     35      6      0    38%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5347435Z src/marketpipe/ingestion/infrastructure/iex_adapter.py                105     70     16      1    30%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5348017Z src/marketpipe/ingestion/infrastructure/models.py                      21      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5348609Z src/marketpipe/ingestion/infrastructure/parquet_storage.py             31      1      4      1    94%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5349352Z src/marketpipe/ingestion/infrastructure/provider_loader.py             39      0     12      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5349971Z src/marketpipe/ingestion/infrastructure/provider_registry.py           59      3     16      3    92%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5350572Z src/marketpipe/ingestion/infrastructure/rate_limit.py                 116      9     22      3    91%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5351173Z src/marketpipe/ingestion/infrastructure/repositories.py               257    216     30      0    14%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5351711Z src/marketpipe/ingestion/writer.py                                     18     18      4      0     0%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5352161Z src/marketpipe/metrics.py                                             113      6     18      3    93%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5352616Z src/marketpipe/metrics_event_handlers.py                                7      7      0      0     0%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5353080Z src/marketpipe/metrics_server.py                                       18      0      2      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5353560Z src/marketpipe/migrations/__init__.py                                  49      0      8      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5354014Z src/marketpipe/security/__init__.py                                     2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5354469Z src/marketpipe/security/mask.py                                        17      0      8      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5354927Z src/marketpipe/validation/__init__.py                                   2      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5355430Z src/marketpipe/validation/application/__init__.py                       0      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5355997Z src/marketpipe/validation/application/commands.py                       5      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5356564Z src/marketpipe/validation/application/services.py                      72     51      8      0    26%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5357216Z src/marketpipe/validation/domain/__init__.py                            0      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5357739Z src/marketpipe/validation/domain/events.py                             29      6      0      0    79%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5358266Z src/marketpipe/validation/domain/services.py                           60      3     28      5    91%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5358819Z src/marketpipe/validation/domain/value_objects.py                      14      1      0      0    93%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5359378Z src/marketpipe/validation/infrastructure/__init__.py                    0      0      0      0   100%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5360099Z src/marketpipe/validation/infrastructure/repositories.py               50      0     16      2    97%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5360607Z -----------------------------------------------------------------------------------------------------
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.5360949Z TOTAL                                                                5436   1528   1082    162    69%
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8233968Z =========================== short test summary info ============================
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8234978Z FAILED tests/cli/test_new_command_paths.py::test_command_consistency_both_paths - AssertionError: Option --config missing from ingest-ohlcv help
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8236359Z assert '--config' in '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n'
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8238289Z  +  where '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n' = CompletedProcess(args=['/opt/hostedtoolcache/Python/3.11.13/x64/bin/python', '-m', 'marketpipe', 'ingest-ohlcv', '--he...x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n', stderr='').stdout
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8240440Z FAILED tests/integration/test_ingestion_coordinator_service_flow.py::TestIngestionCoordinatorEndToEndFlow::test_coordinator_handles_multiple_symbols_correctly - sqlite3.OperationalError: database is locked
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8242189Z FAILED tests/test_cli_rename.py::TestCLIRename::test_command_signatures_preserved - AssertionError: assert '--config' in '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n'
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8243473Z  +  where '\x1b[1m                                                                                \x1b[0m\n\x1b[1m \x1b[0m\x1b[1...   \x1b[2m│\x1b[0m\n\x1b[2m╰──────────────────────────────────────────────────────────────────────────────╯\x1b[0m\n\n' = <Result okay>.stdout
test-sqlite	Run tests (SQLite)	2025-06-13T22:41:33.8244051Z 3 failed, 493 passed, 8 skipped, 6 deselected, 17 warnings in 97.57s (0:01:37)
test-sqlite	Run tests (SQLite)	2025-06-13T23:09:42.0768875Z ##[error]The operation was canceled.
test-sqlite	Post Run actions/checkout@v4	﻿2025-06-13T23:09:42.0855706Z Post job cleanup.
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2573177Z [command]/usr/bin/git version
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2573688Z git version 2.49.0
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2577300Z Temporarily overriding HOME='/home/runner/work/_temp/248d9842-fe45-447e-964e-72717d4b5e6a' before making global git config changes
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2578670Z Adding repository directory to the temporary git global config as a safe directory
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2579729Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/MarketPipe/MarketPipe
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2581454Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2583492Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2585725Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2586805Z http.https://github.com/.extraheader
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2588240Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
test-sqlite	Post Run actions/checkout@v4	2025-06-13T23:09:42.2590604Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
test-sqlite	Complete job	﻿2025-06-13T23:09:42.2634243Z Cleaning up orphan processes
test-sqlite	Complete job	2025-06-13T23:09:42.2837352Z Terminate orphan process: pid (2108) (pytest)
